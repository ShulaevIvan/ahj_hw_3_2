(()=>{"use strict";class t{constructor(t){this.name=t,this.pinned=!1,this.html=this.create(),this.wrapper=document.querySelector(".app-wrap"),this.pinnedWrap=this.wrapper.querySelector(".pinned-wrap"),this.allTasksWrap=this.wrapper.querySelector(".tasks-wrap"),this.pinnedTitle=this.wrapper.querySelector(".pinnedTitle")}create(){const t=document.createElement("div"),e=document.createElement("div"),s=document.createElement("span"),i=document.createElement("button");return t.classList.add("task-item"),e.classList.add("task"),i.classList.add("arrow-down-hide"),s.textContent=this.name,e.appendChild(s),e.appendChild(i),t.appendChild(e),i.addEventListener("click",(t=>{const e=t.target;if(e&&e.classList.contains("arrow-down-hide")){const t=e.previousElementSibling.closest(".task-item");e.classList.remove("arrow-down-hide"),e.classList.add("arrow-down-active"),this.pinned=!0,this.pinnedWrap.appendChild(t),this.pinnedTitle=this.pinnedWrap.querySelector(".pinnedTitle"),this.pinnedTitle.textContent="Pinned tasks"}else if(e&&e.classList.contains("arrow-down-active")){const t=e.previousElementSibling.closest(".task-item");e.classList.add("arrow-down-hide"),e.classList.remove("arrow-down-active"),this.pinned=!1,this.allTasksWrap.appendChild(t),this.pinnedTitle.textContent="No pinned tasks"}})),t}}class e{constructor(){this.popup=document.querySelector(".popup"),this.popupBtn=document.querySelector(".popup__close"),this.popupBtn.addEventListener("click",(t=>{t.target&&t.target.classList.contains("popup__close")&&this.hide()}))}show(){this.popup.classList.remove("popup_hidden")}hide(){this.popup.classList.add("popup_hidden")}}class s{constructor(t){this.wrapper=document.querySelector(t),this.allTasksWrap=this.wrapper.querySelector(".tasks-wrap"),this.pinnedWrap=this.wrapper.querySelector(".pinned-wrap"),this.input=this.wrapper.querySelector(".input-filter"),this.pinnedItems=0,this.allTasks=[],this.popup=new e}addInput(){this.input.addEventListener("keydown",(e=>{if("Enter"===e.key&&""!==this.input.value){const e=new t(this.input.value);this.addTask(e),this.filter(this.input.value),this.input.value=""}else"Enter"===e.key&&""===this.input.value&&this.allTasks.length>0?this.filter(this.input.value,!0):"Enter"===e.key&&""===this.input.value&&0===this.allTasks.length&&this.popup.show()}))}addTask(t){this.allTasks.push(t),this.allTasks.forEach((t=>{t.pinned||this.allTasksWrap.appendChild(t.html)}))}filter(t,e=!1){e?this.allTasks.forEach((t=>{t.html.classList.remove("task-hide")})):this.allTasks.forEach((e=>{if(!e.pinned){const s=this.containsText(e.name,t);e.html.classList.add("task-hide"),s&&e.html.classList.remove("task-hide")}}))}containsText(t,e){return this.clean=e.trim().toLowerCase(),t.toLowerCase().includes(this.clean)}}window.addEventListener("DOMContentLoaded",(()=>{new s(".app-wrap").addInput()}))})();